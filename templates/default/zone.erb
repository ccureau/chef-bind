; Generated by chef for <%= node['fqdn'] %>
; Local changes will be overwritten
; Forward Zone file for <%= new_resource.domain %>
$TTL <%= @new_resource.ttl %>
$ORIGIN <%= @new_resource.domain%>.
<%= @new_resource.domain%>.		IN	SOA	<%= @new_resource.nameserver[0]%>. <%= @new_resource.admin_email%>. (
<% current_time = Time.now().strftime("%Y%m%d%H%I%S") %>
				<%= current_time  %>		; Serial
				<%= @new_resource.refresh %>			; Refresh
				<%= @new_resource.retry %>			; Retry
				<%= @new_resource.expire %>			; Expire
				<%= @new_resource.negative_ttl %>			; Negative TTL Cache
)
;
<% @new_resource.nameserver.each do |server| %>
@   IN  NS  <%= server %>.
<% end %>
;
<% if @new_resource.mailserver.is_a?(String) %>
@   IN  MX  10  <%= @new_resource.mailserver %>.
<% elsif @new_resource.mailserver.is_a(Hash) %>
  <% @new_resource.mailserver.each do |server, priority| %>
@   IN  MX  <%= priority %> <%= server %>.
  <% end %>
<% end %>
;
<% @hosts.each do |name, options| %>
<%= name %>   IN  <%= opts[:type] %>  <%= opts[:ip_name] %>
<% end %>
